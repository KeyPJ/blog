<!-- .vitepress/components/MonthlyResult.vue -->
<template>
  <div class="monthly-result">
    <div class="result-section">
      <h3 class="result-title">æœ¬æœˆè®¡ç®—ç»“æœ</h3>
      <div class="core-result">
        <div class="result-item">
          <span class="label">å‡é™¤è´¹ç”¨(èµ·å¾ç‚¹)ï¼š</span>
          <span class="value">Â¥5000.00</span>
        </div>
        <div class="result-item">
          <span class="label">ä¸ªäººä¸“é¡¹æ‰£é™¤(ç¤¾ä¿å…¬ç§¯é‡‘)ï¼š</span>
          <span class="value">Â¥{{ (result.autoSpecialDeduction + result.fundPersonal).toFixed(2) }}</span>
        </div>
        <div class="result-item">
          <span class="label">ä¼ä¸š/èŒä¸šå¹´é‡‘ä¸ªäººéƒ¨åˆ†ï¼š</span>
          <span class="value">Â¥{{ result.annuityPersonal.toFixed(2) }}</span>
        </div>
        <div class="result-item">
          <span class="label">ä¸“é¡¹é™„åŠ æ‰£é™¤ï¼š</span>
          <span class="value">Â¥{{ (data.specialAddDeductionTotal || 0).toFixed(2) }}</span>
        </div>
        <div class="result-item">
          <span class="label">å…¶ä»–ä¸ªç¨æ‰£é™¤é¡¹ï¼š</span>
          <span class="value">Â¥{{ ((parseFloat(data.taxDeferredInsurance) || 0) + (parseFloat(data.personalPension) || 0) + (parseFloat(data.donationDeduction) || 0)).toFixed(2) }}</span>
        </div>
        <div class="result-item">
          <span class="label">æœ¬æœˆåº”ç¼´ä¸ªäººæ‰€å¾—ç¨ï¼š</span>
          <span class="value">Â¥{{ result.personalTax.toFixed(2) }}</span>
        </div>
        <div class="result-item highlight">
          <span class="label">æœ¬æœˆç¨ååˆ°æ‰‹å·¥èµ„ï¼š</span>
          <span class="value">Â¥{{ result.afterTaxSalary.toFixed(2) }}</span>
        </div>
      </div>

      <!-- æœˆåº¦æ˜ç»†å¯¹æ¯”å’Œä¸ªç¨è®¡ç®—è¿‡ç¨‹ -->
      <div class="comparison-with-tips">
        <div class="comparison-table">
          <h4 class="sub-title">æœ¬æœˆä¸ªäºº/å…¬å¸ç¼´çº³æ˜ç»†</h4>
          <table>
            <thead>
            <tr>
              <th>é¡¹ç›®</th>
              <th>ä¸ªäººç¼´çº³ï¼ˆå…ƒï¼‰</th>
              <th>å…¬å¸ç¼´çº³ï¼ˆå…ƒï¼‰</th>
              <th>åˆè®¡ï¼ˆå…ƒï¼‰</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>å…»è€ä¿é™©</td>
              <td>{{ result.pensionPersonal.toFixed(2) }}</td>
              <td>{{ result.pensionCompany.toFixed(2) }}</td>
              <td>{{ (result.pensionPersonal + result.pensionCompany).toFixed(2) }}</td>
            </tr>
            <tr>
              <td>åŒ»ç–—ä¿é™©ï¼ˆå«ç”Ÿè‚²ï¼‰</td>
              <td>{{ result.medicalPersonal.toFixed(2) }}</td>
              <td>{{ result.medicalCompany.toFixed(2) }}</td>
              <td>{{ (result.medicalPersonal + result.medicalCompany).toFixed(2) }}</td>
            </tr>
            <tr>
              <td>å¤§ç—…äº’åŠ©/é•¿æŠ¤é™©</td>
              <td>{{ data.medicalExtraFee.toFixed(2) }}</td>
              <td>0.00</td>
              <td>{{ data.medicalExtraFee.toFixed(2) }}</td>
            </tr>
            <tr>
              <td>å¤±ä¸šä¿é™©</td>
              <td>{{ result.unemploymentPersonal.toFixed(2) }}</td>
              <td>{{ result.unemploymentCompany.toFixed(2) }}</td>
              <td>{{ (result.unemploymentPersonal + result.unemploymentCompany).toFixed(2) }}</td>
            </tr>
            <tr>
              <td>å·¥ä¼¤ä¿é™©</td>
              <td>0.00</td>
              <td>{{ result.injuryCompany.toFixed(2) }}</td>
              <td>{{ result.injuryCompany.toFixed(2) }}</td>
            </tr>
            <tr v-if="data.enableFund">
              <td>ä½æˆ¿å…¬ç§¯é‡‘</td>
              <td>{{ result.fundPersonal.toFixed(2) }}</td>
              <td>{{ result.fundCompany.toFixed(2) }}</td>
              <td>{{ (result.fundPersonal + result.fundCompany).toFixed(2) }}</td>
            </tr>
            <tr v-if="data.enableAnnuity">
              <td>ä¼ä¸š/èŒä¸šå¹´é‡‘</td>
              <td>{{ result.annuityPersonal.toFixed(2) }}</td>
              <td>{{ result.annuityCompany.toFixed(2) }}</td>
              <td>{{ (result.annuityPersonal + result.annuityCompany).toFixed(2) }}</td>
            </tr>
            <tr>
              <td>ä¸ªäººæ‰€å¾—ç¨</td>
              <td>{{ result.personalTax.toFixed(2) }}</td>
              <td></td>
              <td></td>
            </tr>
            <tr class="total-row">
              <td>æ€»è®¡</td>
              <td>{{ result.totalPersonal.toFixed(2) }}</td>
              <td>{{ result.totalCompany.toFixed(2) }}</td>
              <td></td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- ä¸ªç¨è®¡ç®—è¿‡ç¨‹ -->
        <div class="tax-calculation-tips">
          <h4 class="sub-title">ä¸ªç¨è®¡ç®—è¿‡ç¨‹</h4>
          <div class="yearly-tips">
            <p>ğŸ’¡ ä»…ä¾›å‚è€ƒ,æœ¬è¿‡ç¨‹ä½¿ç”¨æœˆåº¦ä¸ªç¨ç¨ç‡è¡¨,å…·ä½“è®¡ç®—è¯·å‰å¾€å¹´åº¦è®¡ç®—</p>
          </div>
          <div class="tax-steps">
            <div class="tax-step">
              <span class="step-number">1</span>
              <span class="step-desc">è®¡ç®—åº”çº³ç¨æ‰€å¾—é¢</span>
              <div class="step-detail">
                åº”çº³ç¨æ‰€å¾—é¢ = ç¨å‰å·¥èµ„ - ä¸ªäººä¸“é¡¹æ‰£é™¤(ç¤¾ä¿å…¬ç§¯é‡‘ä¸ªäººéƒ¨åˆ†) - å‡é™¤è´¹ç”¨(èµ·å¾ç‚¹,5000å…ƒ) - ä¸“é¡¹é™„åŠ æ‰£é™¤ - å…¶ä»–æ‰£é™¤ ç­‰
              </div>
              <div class="step-formula">
                Â¥{{ (data.preTaxSalary - (result.autoSpecialDeduction + result.fundPersonal) - 5000 - (data.specialAddDeductionTotal || 0) - (result.annuityPersonal + data.taxDeferredInsurance + data.personalPension + data.donationDeduction)).toFixed(2) }}
              </div>
            </div>
            <div class="tax-step">
              <span class="step-number">2</span>
              <span class="step-desc">ç¡®å®šç¨ç‡å’Œé€Ÿç®—æ‰£é™¤æ•°</span>
              <div class="step-detail">
                æ ¹æ®åº”çº³ç¨æ‰€å¾—é¢æŸ¥æ‰¾ç¨ç‡è¡¨ï¼Œç¡®å®šé€‚ç”¨ç¨ç‡å’Œé€Ÿç®—æ‰£é™¤æ•°
              </div>
              <div class="step-formula">
                {{ calculateTaxRateInfo() }}
              </div>
            </div>
            <div class="tax-step">
              <span class="step-number">3</span>
              <span class="step-desc">è®¡ç®—ä¸ªäººæ‰€å¾—ç¨</span>
              <div class="step-detail">
                ä¸ªäººæ‰€å¾—ç¨ = åº”çº³ç¨æ‰€å¾—é¢ Ã— é€‚ç”¨ç¨ç‡ - é€Ÿç®—æ‰£é™¤æ•°
              </div>
              <div class="step-formula">
                Â¥{{ result.personalTax.toFixed(2) }}
              </div>
            </div>
            <div class="tax-step">
              <span class="step-number">4</span>
              <span class="step-desc">è®¡ç®—ç¨åå·¥èµ„</span>
              <div class="step-detail">
                ç¨åå·¥èµ„ = ç¨å‰å·¥èµ„ - ä¸ªäººä¸“é¡¹æ‰£é™¤ - ä¸ªäººæ‰€å¾—ç¨
              </div>
              <div class="step-formula">
                Â¥{{ result.afterTaxSalary.toFixed(2) }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ ¸å¿ƒæ•°æ®è¡¨æ ¼ -->
      <div class="core-data-table">
        <h4 class="sub-title">æ ¸å¿ƒæ•°æ®</h4>
        <table class="core-table">
          <tbody>
          <tr>
            <td class="core-label">ä¸ªäººç¨å‰å·¥èµ„</td>
            <td class="core-value">Â¥{{ data.preTaxSalary.toFixed(2) }}</td>
          </tr>
          <tr>
            <td class="core-label">ä¸ªäººç¨åå·¥èµ„</td>
            <td class="core-value">Â¥{{ result.afterTaxSalary.toFixed(2) }}</td>
          </tr>
          <tr>
            <td class="core-label">å…¬å¸æ€»æˆæœ¬</td>
            <td class="core-value">Â¥{{ (data.preTaxSalary + result.totalCompany).toFixed(2) }}</td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- é¥¼å›¾å±•ç¤º -->
      <div class="chart-section">
        <h4 class="sub-title">å·¥èµ„å»å‘ä¸æˆæœ¬åˆ†æ</h4>
        <div class="chart-grid">
          <!-- ä¸ªäººå·¥èµ„å»å‘é¥¼å›¾ -->
          <div class="chart-item">
            <h5>ä¸ªäººå·¥èµ„å»å‘</h5>
            <div class="pie-chart" style="width: 100%; height: 300px; position: relative;">
              <canvas ref="personalChart"></canvas>
            </div>
          </div>
          <!-- ä¼ä¸šæˆæœ¬åˆ†æé¥¼å›¾ -->
          <div class="chart-item">
            <h5>ä¼ä¸šæˆæœ¬åˆ†æ</h5>
            <div class="pie-chart" style="width: 100%; height: 300px; position: relative;">
              <canvas ref="companyChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, watch } from 'vue'

const props = defineProps({
  data: {
    type: Object,
    required: true
  },
  result: {
    type: Object,
    required: true
  }
})

// è®¡ç®—ç¨ç‡ä¿¡æ¯
const calculateTaxRateInfo = () => {
  const { preTaxSalary } = props.data
  const { autoSpecialDeduction, fundPersonal, annuityPersonal, personalTax } = props.result
  const { specialAddDeductionTotal = 0, taxDeferredInsurance = 0, personalPension = 0, donationDeduction = 0 } = props.data

  // è®¡ç®—åº”çº³ç¨æ‰€å¾—é¢
  const taxableIncome = preTaxSalary - (autoSpecialDeduction + fundPersonal) - 5000 - specialAddDeductionTotal - (annuityPersonal + taxDeferredInsurance + personalPension + donationDeduction)

  if (taxableIncome <= 0) {
    return 'æ— éœ€ç¼´ç¨ï¼ˆåº”çº³ç¨æ‰€å¾—é¢â‰¤0ï¼‰'
  }

  // ç¨ç‡è¡¨
  const taxRateTable = [
    { min: 0, max: 3000, rate: 3, deduct: 0 },
    { min: 3000, max: 12000, rate: 10, deduct: 210 },
    { min: 12000, max: 25000, rate: 20, deduct: 1410 },
    { min: 25000, max: 35000, rate: 25, deduct: 2660 },
    { min: 35000, max: 55000, rate: 30, deduct: 4410 },
    { min: 55000, max: 80000, rate: 35, deduct: 7160 },
    { min: 80000, max: Infinity, rate: 45, deduct: 15160 }
  ]

  // æŸ¥æ‰¾é€‚ç”¨ç¨ç‡
  const taxLevel = taxRateTable.find(level => taxableIncome > level.min && taxableIncome <= level.max) || taxRateTable[taxRateTable.length - 1]

  return `ç¨ç‡ï¼š${taxLevel.rate}%ï¼Œé€Ÿç®—æ‰£é™¤æ•°ï¼šÂ¥${taxLevel.deduct}`
}

const personalChart = ref(null)
const companyChart = ref(null)

// ç»˜åˆ¶é¥¼å›¾çš„å‡½æ•°
const drawPieChart = (canvas, data, labels, colors, title) => {
  if (!canvas) return

  const ctx = canvas.getContext('2d')
  const width = canvas.width
  const height = canvas.height
  const centerX = width * 0.6 // è°ƒæ•´é¥¼å›¾ä½ç½®ï¼Œä¸ºå·¦ä¾§æ ‡ç­¾ç•™å‡ºç©ºé—´
  const centerY = height / 2
  const radius = Math.min(centerX, centerY - 20) - 20 // è°ƒæ•´åŠå¾„ï¼Œç¡®ä¿ä¸ä¸é¡¶éƒ¨æ ‡é¢˜é‡å 

  // æ¸…ç©ºç”»å¸ƒ
  ctx.clearRect(0, 0, width, height)

  // è®¡ç®—æ€»å’Œ
  const total = data.reduce((sum, value) => sum + value, 0)

  // ç»˜åˆ¶é¥¼å›¾
  let startAngle = -Math.PI / 2

  // å­˜å‚¨æ ‡ç­¾ä¿¡æ¯ï¼Œç”¨äºå·¦ä¾§å‚ç›´æ’åˆ—
  const labelInfo = []

  data.forEach((value, index) => {
    const sliceAngle = (value / total) * 2 * Math.PI

    // ç»˜åˆ¶æ‰‡å½¢
    ctx.beginPath()
    ctx.moveTo(centerX, centerY)
    ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle)
    ctx.closePath()
    ctx.fillStyle = colors[index]
    ctx.fill()
    ctx.strokeStyle = '#fff'
    ctx.lineWidth = 2
    ctx.stroke()

    // å­˜å‚¨æ ‡ç­¾ä¿¡æ¯
    const percentage = ((value / total) * 100).toFixed(1)
    labelInfo.push({
      label: labels[index],
      value: value,
      percentage: percentage,
      color: colors[index],
      startAngle: startAngle,
      endAngle: startAngle + sliceAngle
    })

    startAngle += sliceAngle
  })

  // ç»˜åˆ¶å·¦ä¾§å‚ç›´æ’åˆ—çš„æ ‡ç­¾
  const labelStartY = height * 0.2
  const labelSpacing = 35 // å¢åŠ é—´è·ï¼Œä¸ºå…·ä½“æ•°å€¼ç•™å‡ºç©ºé—´
  const labelX = width * 0.2

  labelInfo.forEach((info, index) => {
    const labelY = labelStartY + index * labelSpacing

    // ç»˜åˆ¶é¢œè‰²æ–¹å—
    ctx.fillStyle = info.color
    ctx.fillRect(labelX, labelY - 12, 16, 16)

    // ç»˜åˆ¶æ ‡ç­¾æ–‡å­—
    ctx.fillStyle = '#333'
    ctx.font = '14px Arial'
    ctx.textAlign = 'left'
    ctx.textBaseline = 'middle'
    ctx.fillText(`${info.label}`, labelX + 24, labelY - 10)

    // ç»˜åˆ¶å…·ä½“æ•°å€¼å’Œç™¾åˆ†æ¯”
    ctx.font = '12px Arial'
    ctx.fillText(`Â¥${info.value.toFixed(2)} (${info.percentage}%)`, labelX + 24, labelY + 10)
  })

  // ç»˜åˆ¶æ ‡é¢˜
  ctx.fillStyle = '#333'
  ctx.font = '16px Arial'
  ctx.textAlign = 'center'
  ctx.fillText(`${title} (å…± Â¥${total.toFixed(2)})`, centerX, 30) // å›ºå®šåœ¨30pxé«˜åº¦ï¼Œç¡®ä¿ä¸ä¸é¥¼å›¾é‡å 
}

// ç»˜åˆ¶ä¸ªäººå·¥èµ„å»å‘é¥¼å›¾
const drawPersonalChart = () => {
  const { preTaxSalary } = props.data
  const { afterTaxSalary, pensionPersonal, medicalPersonal, unemploymentPersonal, fundPersonal, annuityPersonal, personalTax } = props.result
  const medicalExtraFee = props.data.medicalExtraFee || 0

  const data = [
    afterTaxSalary,
    pensionPersonal,
    medicalPersonal,
    unemploymentPersonal + medicalExtraFee,
    fundPersonal,
    annuityPersonal,
    personalTax
  ]

  const labels = ['ç¨åå·¥èµ„', 'å…»è€ä¿é™©é‡‘', 'åŒ»ç–—ä¿é™©é‡‘', 'å¤±ä¸šä¿é™©é‡‘', 'ä½æˆ¿å…¬ç§¯é‡‘', 'å¹´é‡‘', 'ä¸ªäººæ‰€å¾—ç¨']
  const colors = ['#42b983', '#3498db', '#f39c12', '#e74c3c', '#9b59b6', '#1abc9c', '#34495e']

  drawPieChart(personalChart.value, data, labels, colors, 'ä¸ªäººå·¥èµ„å»å‘')
}

// ç»˜åˆ¶ä¼ä¸šæˆæœ¬åˆ†æé¥¼å›¾
const drawCompanyChart = () => {
  const { preTaxSalary } = props.data
  const { pensionCompany, medicalCompany, unemploymentCompany, injuryCompany, fundCompany, annuityCompany } = props.result

  const data = [
    preTaxSalary,
    pensionCompany,
    medicalCompany,
    unemploymentCompany,
    injuryCompany,
    fundCompany,
    annuityCompany
  ]

  const labels = ['ç¨å‰å·¥èµ„', 'å…»è€', 'åŒ»ç–—', 'å¤±ä¸š', 'å·¥ä¼¤', 'å…¬ç§¯é‡‘', 'å¹´é‡‘']
  const colors = ['#42b983', '#3498db', '#f39c12', '#e74c3c', '#9b59b6', '#1abc9c', '#34495e']

  drawPieChart(companyChart.value, data, labels, colors, 'ä¼ä¸šæˆæœ¬åˆ†æ')
}

// ç»„ä»¶æŒ‚è½½åç»˜åˆ¶å›¾è¡¨
onMounted(() => {
  // è®¾ç½®canvaså°ºå¯¸
  if (personalChart.value) {
    personalChart.value.width = personalChart.value.offsetWidth
    personalChart.value.height = 300
  }
  if (companyChart.value) {
    companyChart.value.width = companyChart.value.offsetWidth
    companyChart.value.height = 300
  }

  drawPersonalChart()
  drawCompanyChart()
})

// ç›‘å¬æ•°æ®å˜åŒ–ï¼Œé‡æ–°ç»˜åˆ¶å›¾è¡¨
watch([() => props.data, () => props.result], () => {
  drawPersonalChart()
  drawCompanyChart()
}, { deep: true })
</script>

<style scoped>
.result-section {
  margin-top: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 6px;
}

.result-title {
  font-size: 1.1rem;
  color: #333;
  margin-bottom: 15px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.core-result {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
  padding: 20px;
  background: #fff;
  border-radius: 6px;
}

.result-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.95rem;
  padding: 8px 0;
  border-bottom: 1px solid #f0f0f0;
}

.result-item:last-child {
  border-bottom: none;
}

.result-item.highlight {
  font-size: 1rem;
  background-color: #f8fff8;
  padding: 12px;
  border-radius: 4px;
  border-bottom: none;
  margin-bottom: 8px;
}

.result-item.highlight .value {
  color: #42b983;
  font-weight: bold;
  font-size: 1.1rem;
}

.result-item .label {
  color: #666;
  flex: 1;
}

.result-item .value {
  color: #333;
  font-weight: 500;
  flex: 1;
  text-align: right;
}

.comparison-table {
  margin-top: 20px;
}

.comparison-table table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.comparison-table th, .comparison-table td {
  padding: 8px 10px;
  text-align: center;
  border: 1px solid #eee;
}

.comparison-table th {
  background: #f5f7fa;
}

.total-row {
  background: #f0f2f5 !important;
  font-weight: bold;
}

.highlight-row {
  background: #e8f4f8 !important;
  font-weight: bold;
  color: #333;
}

.sub-title {
  font-size: 0.95rem;
  color: #444;
  margin-bottom: 10px;
}

/* å›¾è¡¨éƒ¨åˆ†æ ·å¼ */
.chart-section {
  margin-top: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 6px;
}

.chart-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 30px;
  margin-top: 20px;
}

.chart-item {
  background: #fff;
  padding: 20px;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.chart-item h5 {
  font-size: 1rem;
  color: #333;
  margin-bottom: 15px;
  text-align: center;
}

.pie-chart {
  position: relative;
  width: 100%;
  height: 300px;
}

.pie-chart canvas {
  width: 100% !important;
  height: 100% !important;
}

/* å¯¹æ¯”è¡¨æ ¼å’Œä¸ªç¨è®¡ç®—è¿‡ç¨‹å®¹å™¨æ ·å¼ */
.comparison-with-tips {
  display: flex;
  gap: 20px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.comparison-table {
  flex: 1;
  min-width: 400px;
}

.tax-calculation-tips {
  flex: 1;
  min-width: 400px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 6px;
  border-left: 3px solid #42b983;
}

.tax-steps {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.tax-step {
  background: #fff;
  padding: 12px;
  border-radius: 4px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.step-number {
  display: inline-block;
  width: 20px;
  height: 20px;
  line-height: 20px;
  text-align: center;
  background: #42b983;
  color: #fff;
  border-radius: 50%;
  margin-right: 8px;
  font-size: 0.8rem;
}

.step-desc {
  font-weight: bold;
  color: #333;
  margin-bottom: 5px;
  display: block;
}

.step-detail {
  font-size: 0.85rem;
  color: #666;
  margin-bottom: 5px;
  line-height: 1.4;
}

.step-formula {
  font-size: 0.9rem;
  color: #42b983;
  font-weight: bold;
  margin-top: 5px;
}

/* æ ¸å¿ƒæ•°æ®è¡¨æ ¼æ ·å¼ */
.core-data-table {
  margin-top: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 6px;
}

.core-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.core-table td {
  padding: 12px 15px;
  border: 1px solid #eee;
}

.core-label {
  background: #f5f7fa;
  font-weight: bold;
  color: #333;
  width: 50%;
}

.core-value {
  background: #fff;
  text-align: right;
  font-weight: bold;
  color: #42b983;
  width: 50%;
}

@media (max-width: 768px) {
  .core-result {
    flex-direction: column;
    gap: 10px;
  }

  .result-item {
    min-width: 100%;
  }

  .comparison-with-tips {
    flex-direction: column;
  }

  .comparison-table,
  .tax-calculation-tips {
    min-width: 100%;
  }

  .chart-grid {
    grid-template-columns: 1fr;
  }

  .chart-item {
    padding: 15px;
  }

  .pie-chart {
    height: 250px;
  }
}
</style>
